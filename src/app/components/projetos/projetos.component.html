<div class="container-projeto">
  <div class="barra-compartilhar">
    <div class="container">
      <span class="baixar"><p>
                <img class="botao-icone" alt="Ícone de Projetos" src="../../../assets/ic_projetos.svg"/>
                &nbsp;Pagina de Projeto:&nbsp;&nbsp;&nbsp;
                <span class="links"><a filename="projeto.json" target="projeto.json" href="{{ configurationService.ApiUrl + 'projetos/' + PRONAC }}">json</a> | 
                <a filename="projeto.csv" target="projeto.csv" href="{{ configurationService.ApiUrl + 'projetos/' + PRONAC + '?format=csv' }}">csv</a> | 
                <a filename="projeto.xml" target="projeto.xml" href="{{ configurationService.ApiUrl + 'projetos/' + PRONAC + '?format=xml' }}">xml</a></span></p>
      </span>
      <div *ngIf="!carregandoDados" class="compartilhar"> 
      <p>Compartilhe:&nbsp;&nbsp;</p>
      <share-buttons class="withCount" 
                  [defaultStyle]="false"
                  [url]="url" 
                  [title]="'Projeto: ' + projeto.nome" 
                  [description]="'VERSALIC - Portal de Visualização do Sistema de Apoio às Leis de Incentivo à Cultura.'"
                  [stumbleUpOn]="false" [pinterest]="false" [tumblr]="false" [linkedIn]="false"
                  [showCount]="true" ></share-buttons>
    </div>
    </div>
  </div>
  <div *ngIf="!carregandoDados" class="container">
    <h1 class="pagina-titulo">
      {{ projeto.nome }}
    </h1>
  </div>  
  <div class="linha-pagina-titulo"></div>
  <div class="container">
    <div  *ngIf="!carregandoDados && projeto != undefined" class="row">
      <div class="pagina-infos col-sm-7">
        <div class="row">
          <div class="col-sm-3"><p class="pagina-infos-label">PRONAC: </p><p class="pagina-infos-valor">{{ projeto.PRONAC }}</p></div>
          <div class="col-sm-4 col-xs-6"><p class="pagina-infos-label">Segmento: </p><p class="pagina-infos-valor">{{ projeto.segmento }}</p></div>
          <div class="col-sm-5 col-xs-6"><p class="pagina-infos-label">Área: </p><p class="pagina-infos-valor">{{ projeto.area }}</p></div>
        </div>
        <div class="row">
          <div class="col-sm-3 col-xs-6"><p class="pagina-infos-label">Mecanismo: </p><p class="pagina-infos-valor">{{ projeto.mecanismo }}</p></div>
          <div class="col-sm-4 col-xs-6"><p class="pagina-infos-label">Enquadramento: </p><p class="pagina-infos-valor">{{ projeto.enquadramento }}</p></div>
          <div class="col-sm-5 col-xs-6"><p class="pagina-infos-label">Município/UF: </p><p class="pagina-infos-valor">{{ projeto.municipio }}, {{ projeto.UF }}</p></div>
          <div class="col-xs-6 hidden-sm hidden-lg hidden-md"><p class="pagina-infos-label">Ano do projeto: </p><p class="pagina-infos-valor">{{ dataFormatterService.formataAno(projeto.ano_projeto) }}</p></div>
        </div>
        <div class="row">
          <div class="col-sm-4 hidden-xs"><p class="pagina-infos-label">Ano do projeto: </p><p class="pagina-infos-valor">{{ dataFormatterService.formataAno(projeto.ano_projeto) }}</p></div>
          <div class="col-sm-4 col-xs-6"><p class="pagina-infos-label">Data término: </p><p class="pagina-infos-valor">{{ dataFormatterService.formataData(projeto.data_inicio) }}</p></div>
          <div class="col-sm-4 col-xs-6"><p class="pagina-infos-label">Data início: </p><p class="pagina-infos-valor">{{ dataFormatterService.formataData(projeto.data_inicio) }}</p></div>
        </div>
        <div class="row">
          <div class="col-sm-7"><p class="pagina-infos-label">Proponente: </p><p class="pagina-infos-valor">{{ projeto.proponente }}</p></div>
          <div class="col-sm-5"><p class="pagina-infos-label">CPF/CNPJ: </p><p class="pagina-infos-valor">{{ dataFormatterService.formataCGCCPF(projeto.cgccpf) }}</p></div>
        </div>
        <div class="row">
          <div class="col-sm-12"><p class="pagina-infos-label">Situação: </p><p class="pagina-infos-valor-destaque">{{ projeto.situacao }}</p></div>
        </div>
      </div>               
      <div class="pagina-infos col-sm-5">
        <div class="pagina-bloco">
          <div class="row">
            <div class="col-xs-6"><p class="pagina-infos-label">Valor proposta: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.valor_proposta) }}">{{ dataFormatterService.formataValorEmReais(projeto.valor_proposta) }}</p></div>
            <div class="col-xs-6"><p class="pagina-infos-label">Valor projeto: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.valor_projeto) }}">{{ dataFormatterService.formataValorEmReais(projeto.valor_projeto) }}</p></div>
          </div> 
          <div class="row">
            <div class="col-xs-6"><p class="pagina-infos-label">Valor solicitado: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.valor_solicitado) }}">{{ dataFormatterService.formataValorEmReais(projeto.valor_solicitado) }}</p></div>
            <div class="col-xs-6"><p class="pagina-infos-label">Valor aprovado: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.valor_aprovado) }}">{{ dataFormatterService.formataValorEmReais(projeto.valor_aprovado) }}</p></div>
          </div> 
          <div class="row">
            <div class="col-xs-6"><p class="pagina-infos-label">Valor captado: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.valor_captado) }}">{{ dataFormatterService.formataValorEmReais(projeto.valor_captado) }}</p></div>
            <div class="col-xs-6"><p class="pagina-infos-label">Outras fontes: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.outras_fontes) }}">{{ dataFormatterService.formataValorEmReais(projeto.outras_fontes) }}</p></div>
          </div> 
        </div>
        <p class="pagina-infos-label">Páginas associadas: </p>
        <div class="pagina-botoes hidden-xs hidden-sm visible-inline-md visible-inline-lg">
          <button [routerLink]="['/proponentes', dataFormatterService.extraiIdDaUrl(projeto._links.proponente)]" type="button" class="btn btn-primary"><img class="botao-icone" alt="Ícone de Proponentes" src="../../../assets/ic_proponentes.svg"/>&nbsp;Propontente</button>
          <button [routerLink]="['/incentivadores']" [queryParams]="{'PRONAC': projeto.PRONAC}" type="button" class="btn btn-primary pull-center" disabled="{ projeto._embedded.captacoes?.length <= 0 }"><img class="botao-icone" alt="Ícone de Incentivadores" src="../../../assets/ic_incentivadores.svg"/>&nbsp;Incentivadores</button>
          <button [routerLink]="['/fornecedores']" [queryParams]="{'PRONAC': projeto.PRONAC}" type="button" class="btn btn-primary" disabled="{ projeto._embedded.relacao_pagamentos?.length <= 0}"><img class="botao-icone" alt="Ícone de Fornecedores" src="../../../assets/ic_fornecedores.svg"/>&nbsp;Fornecedores</button>
        </div>
        <div class="pagina-botoes hidden-md hidden-lg visible-inline-sm visible-inline-xs">
          <button [routerLink]="['/proponentes', dataFormatterService.extraiIdDaUrl(projeto._links.proponente)]" type="button" class="btn btn-primary"><img class="botao-icone" alt="Ícone de Proponentes" src="../../../assets/ic_proponentes.svg"/>&nbsp;Propontente</button>
        </div>
        <div class="pagina-botoes hidden-md hidden-lg visible-inline-sm visible-inline-xs">
          <button [routerLink]="['/incentivadores']" [queryParams]="{'PRONAC': projeto.PRONAC}" type="button" class="btn btn-primary pull-center" disabled="{ projeto._embedded.captacoes?.length <= 0 }"><img class="botao-icone" alt="Ícone de Incentivadores" src="../../../assets/ic_incentivadores.svg"/>&nbsp;Incentivadores</button>
          <button [routerLink]="['/fornecedores']" [queryParams]="{'PRONAC': projeto.PRONAC}" type="button" class="btn btn-primary" disabled="{ projeto._embedded.relacao_pagamentos?.length <= 0}"><img class="botao-icone" alt="Ícone de Fornecedores" src="../../../assets/ic_fornecedores.svg"/>&nbsp;Fornecedores</button>
        </div>
      </div>
    </div>
    <div [ngStyle]="{ opacity: carregandoDados ? '0' : '1' }" class="container-abas row">
      <div class="scroller scroller-left"><i class="glyphicon glyphicon-chevron-left"></i></div>
      <div class="scroller scroller-right"><i class="glyphicon glyphicon-chevron-right"></i></div>
      <div class="text-center abas-texto">
        <ul class="nav nav-pills aba">
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'resumo'}"><a (click)="textoSelecionado = 'resumo'">Resumo</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'etapa'}"><a (click)="textoSelecionado = 'etapa'">Etapa</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'providencia'}"><a (click)="textoSelecionado = 'providencia'">Providência</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'objetivos'}"><a (click)="textoSelecionado = 'objetivos'">Objetivos</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'sinopse'}"><a (click)="textoSelecionado = 'sinopse'">Sinopse</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'justificativa'}"><a (click)="textoSelecionado = 'justificativa'">Justificativa</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'ficha_tecnica'}"><a (click)="textoSelecionado = 'ficha_tecnica'">Ficha Técnica</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'especificacao_tecnica'}"><a (click)="textoSelecionado = 'especificacao_tecnica'">Especificação Técnica</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'impacto_ambiental'}"><a (click)="textoSelecionado = 'impacto_ambiental'">Impacto Ambiental</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'democratizacao'}"><a (click)="textoSelecionado = 'democratizacao'">Democratização</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'acessibilidade'}"><a (click)="textoSelecionado = 'acessibilidade'">Acessibilidade</a></li>
        </ul>
      </div>
    </div>  
    <div *ngIf="!carregandoDados && projeto != undefined" class="pagina-textos">   
      <p>{{ dataFormatterService.verificaSeHaTexto(projeto[textoSelecionado]) }}</p>

<!--
      <h4>Exemplo de formatação de dados: </h4> 
      <p>Data Formatada: {{ projeto?.data_inicio }} -> {{ dataFormatterService.formataData(projeto?.data_inicio)}} -> {{ dataFormatterService.formataDataExtenso(projeto?.data_inicio)}}<br></p>
      <p>Valor Formatado: {{ projeto?.valor_solicitado }} -> {{ dataFormatterService.formataValorEmReais(projeto?.valor_solicitado)}}<br></p>
      <p>CGCCPF Formatado: {{ projeto?.cgccpf }} -> {{ dataFormatterService.formataCGCCPF(projeto?.cgccpf)}}<br></p>

      <h4>Exemplo de Captações (uma das)</h4>
      <p *ngIf="projeto._embedded.captacoes.length <= 0">Este projeto ainda <strong>não possui Incentivadores</strong> ou captações.</p>
      <p *ngIf="projeto._embedded.captacoes.length > 0">{{ projeto._embedded.captacoes[0].valor }} doados pelo {{ projeto._embedded.captacoes[0].nome_doador }}. <button type="button" class="btn btn-warning" [routerLink]="['/incentivadores', dataFormatterService.extraiIdDaUrl(projeto._embedded.captacoes[0]._links.incentivador)]">IR PARA INCENTIVADOR</button></p>

      <h4>Exemplo de Relações Pagamento (produtos) (uma das)</h4>
      <p *ngIf="projeto._embedded.relacao_pagamentos.length <= 0">Este projeto ainda <strong>não possui Fornecedores</strong> ou Relações Pagamento.</p>
      <p *ngIf="projeto._embedded.relacao_pagamentos.length > 0">{{ projeto._embedded.relacao_pagamentos[0].nome }} fornecido pelo {{ projeto._embedded.relacao_pagamentos[0].nome_fornecedor }}. <button type="button" class="btn btn-warning" [routerLink]="['/fornecedores', dataFormatterService.extraiIdDaUrl(projeto._embedded.relacao_pagamentos[0]._links.fornecedor)]">IR PARA FORNECEDOR</button></p>
-->
    </div>
  </div>

  <!-- MODAL DE DISTRIBUIÇÃO ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeDistribuicao="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Distribuição" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Distribuição do Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeDistribuicao()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let distribuicao of projeto._embedded.distribuicao; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ distribuicao.produto }}"><p>{{ distribuicao.produto }}</p></div>
                <div class="row row-dark">
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Segmento: </p><p class="modal-item-valor">{{ distribuicao.segmento }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Área: </p><p class="modal-item-valor">{{ distribuicao.area }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Localização: </p><p class="modal-item-valor">{{ dataFormatterService.verificaSeHaTexto(distribuicao.localizacao) }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Posição da Logo: </p><p class="modal-item-valor">{{ distribuicao.posicao_logo }}</p></div>
                </div>
                <div class="row">
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Preço unitário normal: </p><p class="modal-item-valor">{{ dataFormatterService.formataValorEmReais(distribuicao.preco_unitario_normal) }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Quantidade venda normal: </p><p class="modal-item-valor">{{ distribuicao.qtd_venda_normal }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Preço unitário promocional: </p><p class="modal-item-valor">{{ dataFormatterService.formataValorEmReais(distribuicao.preco_unitario_promocional) }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Qtd. venda promocional: </p><p class="modal-item-valor">{{ distribuicao.qtd_venda_promocional }}</p></div>
                </div>
                <div class="row row-dark">
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Quantidade do proponente: </p><p class="modal-item-valor">{{ distribuicao.qtd_proponente }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Quantidade do patrocinador: </p><p class="modal-item-valor">{{ distribuicao.qtd_patrocinador }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Quantidade produzida: </p><p class="modal-item-valor">{{ distribuicao.qtd_produzida }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Quantidade de outros: </p><p class="modal-item-valor">{{ distribuicao.qtd_outros }}</p></div>
                </div>
                <div class="row">
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Receita normal: </p><p class="modal-item-valor">{{ distribuicao.receita_normal }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Receita prevista: </p><p class="modal-item-valor">{{ distribuicao.receita_prevista }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Receita projeto: </p><p class="modal-item-valor">{{ distribuicao.receita_pro }}</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE DIVULGAÇÃO ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeDivulgacao="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Divulgação" aria-hidden="true">
      <div class="modal-dialog modal-md">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Divulgação do Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeDivulgacao()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let divulgacao of projeto._embedded.divulgacao; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ divulgacao.peca }}"><p>Peça: {{ divulgacao.peca }}</p></div>
                <div class="row">
                  <div class="col-xs-12"><p class="modal-item-label">Veículo: </p><p class="modal-item-valor">{{ divulgacao.veiculo }}</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE DDOCUMENTOS ANEXOS ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeDocumentosAnexos="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Documentos Anexos" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Documentos Anexados ao Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeDocumentosAnexos()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let documento of projeto._embedded.documentos_anexados; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ documento.produto }}"><p>{{ documento.nome }}</p></div>
                <div class="row">
                  <div class="col-md-6 col-sm-12 col-xs-12"><p class="modal-item-label">Classificação: </p><p class="modal-item-valor">{{ dataFormatterService.verificaSeHaTexto(documento.classificacao) }}</p></div>
                  <div class="col-md-4 col-sm-8 col-xs-12"><p class="modal-item-label">Data: </p><p class="modal-item-valor">{{ dataFormatterService.formataData(documento.data) }}</p></div>
                  <div class="col-md-2 col-sm-4 col-xs-12"><p class="modal-item-label">Link: </p><a class="modal-item-valor" href="{{ documento.link }}">Clique aqui.</a></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <button (click)="mostrarModalDeDistribuicao();">Distribuição</button>
  <button (click)="mostrarModalDeDivulgacao();">Divulgação</button>
  <button (click)="mostrarModalDeDocumentosAnexos();">Documentos Anexos</button>

  <!-- ÍCONE DE CARREGAMENTO =====================================================-->
  <div *ngIf="carregandoDados" class="spinner">
    <sk-cube-grid [color]="'#226000'" [isRunning]="carregandoDados"></sk-cube-grid>
    <p>Carregando Projeto...</p>
  </div>
</div>